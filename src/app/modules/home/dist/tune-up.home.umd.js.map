{"version":3,"file":"tune-up.home.umd.js","sources":["../src/components/utlist/services/utlist.service.js","../src/components/utlist/services/agentpic.service.js","../src/home.component.js","../src/home.routing.js","../src/components/kanbanresume/services/kanbanactivities.service.js","../src/components/kanbanresume/kanbanresume.component.js","../src/components/utlist/utlist.component.js","../src/home.module.js"],"sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\n// TODO: move to home\r\n@Injectable()\r\nexport class UtListService {\r\n  constructor(http: HttpClient) {\r\n    this._http = http;\r\n    this._url = 'SeguimientosKanban';\r\n  }\r\n  get(\r\n    idActividad = 'ALL',\r\n    idAgente = 'ALL',\r\n    idProducto = 'ALL',\r\n    idVersion = 'ALL',\r\n    idProyecto = 'ALL'\r\n  ) {\r\n    return this._http.get(\r\n      `${this._url}?idActividad=${idActividad}&idAgente=${idAgente}&idProducto=${idProducto}&idVersion=${idVersion}&idProyecto=${idProyecto}`\r\n    );\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class AgentPicService {\r\n  constructor(http: HttpClient) {\r\n    this._http = http;\r\n    this._url = 'Agentes/Imagen';\r\n  }\r\n  get(idAgente, idSitio) {\r\n    return this._http.get(`${this._url}/${idAgente}/${idSitio}`, {\r\n      responseType: 'blob',\r\n    });\r\n  }\r\n}\r\n","import {Component} from '@angular/core';\nimport {UtListService} from './components/utlist/services';\nimport {NotificationsService} from '@tune-up/core';\nimport html from './home.component.html';\nimport './home.component.css';\n\n@Component({\n  selector: 'tn-home',\n  template: html,\n  providers: [UtListService],\n})\nexport class HomeComponent {\n  allUts = [];\n  utsToShow = [];\n  constructor(\n    utListService: UtListService,\n    notificationService: NotificationsService\n  ) {\n    this._utListService = utListService;\n    this._notificationsService = notificationService;\n    this._getUts();\n  }\n  _getUts() {\n    this._getUtsSubscription = this._utListService.get().subscribe(\n      (data) => {\n        this.allUts = data;\n        this.utsToShow = data;\n      },\n      (error) =>\n        this._notificationsService.error(\n          'No se pudieron obtener las UTs',\n          error\n        )\n    );\n  }\n  filterUts = (idActivity, status) => {\n    this.utsToShow = this.allUts.filter(\n      (ut) =>\n        (idActivity === 'ALL' || ut.IdActividad === idActivity) &&\n        (status === 'ALL' || ut.Estado === status ||\n          (ut.Estado === 'ACTIVE' && status === 'DOING'))\n    );\n  };\n  ngOnDestroy() {\n    this._getUtsSubscription &&\n      !this._getUtsSubscription.closed &&\n      this._getUtsSubscription.unsubscribe();\n  }\n}\n","import {RouterModule} from '@angular/router';\r\nimport {NgModule} from '@angular/core';\r\nimport {HomeComponent} from './home.component';\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild([{path: '', component: HomeComponent}])],\r\n  exports: [RouterModule],\r\n})\r\nexport class HomeRoutingModule {}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class KanbanActivitiesService {\r\n  constructor(http: HttpClient) {\r\n    this._http = http;\r\n    this._url = 'ActividadesKanban2';\r\n  }\r\n  get(\r\n    idActividad = 'ALL',\r\n    idAgente = 'ALL',\r\n    idProducto = 'ALL',\r\n    idVersion = 'ALL',\r\n    idProyecto = 'ALL'\r\n  ) {\r\n    return this._http.get(\r\n      `${this._url}?idActividad=${idActividad}&idAgente=${idAgente}&idProducto=${idProducto}&idVersion=${idVersion}&idProyecto=${idProyecto}`\r\n    );\r\n  }\r\n}\r\n","import {Component, Input} from '@angular/core';\r\nimport {NotificationsService} from '@tune-up/core';\r\nimport {KanbanActivitiesService} from './services';\r\nimport html from './kanbanresume.component.html';\r\nimport './kanbanresume.component.css';\r\n\r\n@Component({\r\n  selector: 'tn-kanban-resume',\r\n  template: html,\r\n  providers: [KanbanActivitiesService],\r\n})\r\nexport class KanbanResumeComponent {\r\n  kanbanActivities = [];\r\n  selectedActivity = undefined;\r\n  @Input() filterUts;\r\n  constructor(\r\n    activitiesService: KanbanActivitiesService,\r\n    notificationsService: NotificationsService\r\n  ) {\r\n    this._activitiesService = activitiesService;\r\n    this._notificationsService = notificationsService;\r\n    this._getKanbanActivities();\r\n  }\r\n  _getKanbanActivities() {\r\n    this._getActivitiesSubscription = this._activitiesService.get().subscribe(\r\n      (data) => {\r\n        this.kanbanActivities = data;\r\n      },\r\n      (error) =>\r\n        this._notificationsService.error(\r\n          'No se pudieron obtener las actividades del Kanban Resumido',\r\n          error\r\n        )\r\n    );\r\n  }\r\n  filterKanbanActivies(idActivity = 'ALL', status = 'ALL') {\r\n    if (idActivity == -1) idActivity = 'ALL';\r\n    this.filterUts(idActivity, status);\r\n  }\r\n  ngOnDestroy() {\r\n    this._getActivitiesSubscription &&\r\n    !this._getActivitiesSubscription.closed &&\r\n    this._getActivitiesSubscription.unsubscribe();\r\n  }\r\n}\r\n","import {Component, Input} from '@angular/core';\r\nimport {NotificationsService, AgentService} from '@tune-up/core';\r\nimport {AgentPicService} from './services';\r\nimport html from './utlist.component.html';\r\nimport './utlist.component.css';\r\n\r\n// TODO: extract to a config file\r\nconst utTypesIcons = {\r\n  1: 'fa fa-star',\r\n  2: 'fa fa-bug',\r\n  3: 'fa fa-plus-circle',\r\n  4: 'fa fa-puzzle-piece',\r\n};\r\nconst workflowIcons = {\r\n  1: 'fa fa-arrow-up',\r\n  2: 'fa fa-repeat',\r\n  3: 'fa fa-cog',\r\n  4: 'fa fa-undo',\r\n  5: 'fa fa-refresh',\r\n};\r\nconst agentPics = {};\r\n\r\n@Component({\r\n  selector: 'tn-ut-list',\r\n  template: html,\r\n  providers: [AgentPicService],\r\n})\r\nexport class UtListComponent {\r\n  @Input() uts;\r\n  constructor(\r\n    agentPicService: AgentPicService,\r\n    notificationService: NotificationsService,\r\n    agentService: AgentService\r\n  ) {\r\n    this._agentPicService = agentPicService;\r\n    this._notificationsService = notificationService;\r\n    this._agentService = agentService;\r\n  }\r\n  getAgentPic = (ut) => {\r\n      const idAgente = ut.IdAgente;\r\n      if (idAgente) {\r\n        const idSitio = this._agentService.getSiteId();\r\n        if (!agentPics[idAgente]) {\r\n          this._agentPicService.get(idAgente, idSitio).subscribe((data) => {\r\n            agentPics[idAgente] = URL.createObjectURL(data);\r\n          });\r\n        }\r\n        return agentPics[idAgente] || '';\r\n      }\r\n      return '';\r\n  };\r\n  getUtTypeIcon = (ut) => {\r\n    return utTypesIcons[ut.IdTipoUT];\r\n  };\r\n  getStateIcon = (ut) => {\r\n    return workflowIcons[ut.IdTipoSeguimiento];\r\n  };\r\n  getUtLink = (ut) => {\r\n    return `/uts/${ut.IdUT}`;\r\n  };\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {HomeRoutingModule} from './home.routing';\r\nimport {HomeComponent} from './home.component';\r\nimport {TuneUpCoreModule} from '@tune-up/core';\r\nimport {KanbanResumeComponent, UtListComponent} from './components';\r\n\r\n@NgModule({\r\n  imports: [TuneUpCoreModule, HomeRoutingModule],\r\n  declarations: [\r\n    HomeComponent,\r\n    KanbanResumeComponent,\r\n    UtListComponent,\r\n  ],\r\n})\r\nexport class HomeModule {}\r\n"],"names":["UtListService","Injectable","http","_http","_url","idActividad","idAgente","idProducto","idVersion","idProyecto","get","HttpClient","AgentPicService","idSitio","HomeComponent","Component","html","utListService","notificationService","allUts","utsToShow","filterUts","idActivity","status","filter","ut","IdActividad","Estado","_utListService","_notificationsService","_getUts","_getUtsSubscription","subscribe","data","error","closed","unsubscribe","NotificationsService","HomeRoutingModule","NgModule","RouterModule","forChild","path","component","KanbanActivitiesService","KanbanResumeComponent","Input","activitiesService","notificationsService","kanbanActivities","selectedActivity","undefined","_activitiesService","_getKanbanActivities","_getActivitiesSubscription","utTypesIcons","workflowIcons","agentPics","UtListComponent","agentPicService","agentService","getAgentPic","IdAgente","_agentService","getSiteId","_agentPicService","URL","createObjectURL","getUtTypeIcon","IdTipoUT","getStateIcon","IdTipoSeguimiento","getUtLink","IdUT","uts","AgentService","HomeModule","TuneUpCoreModule"],"mappings":"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"}