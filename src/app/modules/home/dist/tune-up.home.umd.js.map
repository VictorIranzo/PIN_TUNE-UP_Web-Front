{"version":3,"file":"tune-up.home.umd.js","sources":["../src/components/utlist/services/utlist.service.js","../src/components/utlist/services/agentpic.service.js","../src/home.component.js","../src/home.routing.js","../src/components/kanbanresume/services/kanbanactivities.service.js","../src/components/kanbanresume/kanbanresume.component.js","../src/components/utlist/utlist.component.js","../src/home.module.js"],"sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\n// TODO: move to home\r\n@Injectable()\r\nexport class UtListService {\r\n  constructor(http: HttpClient) {\r\n    this._http = http;\r\n    this._url = 'SeguimientosKanban';\r\n  }\r\n  get(\r\n    idActividad = 'ALL',\r\n    idAgente = 'ALL',\r\n    idProducto = 'ALL',\r\n    idVersion = 'ALL',\r\n    idProyecto = 'ALL'\r\n  ) {\r\n    return this._http.get(\r\n      `${this._url}?idActividad=${idActividad}&idAgente=${idAgente}&idProducto=${idProducto}&idVersion=${idVersion}&idProyecto=${idProyecto}`\r\n    );\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class AgentPicService {\r\n  constructor(http: HttpClient) {\r\n    this._http = http;\r\n    this._url = 'Agentes/Imagen';\r\n  }\r\n  get(idAgente, idSitio) {\r\n    return this._http.get(`${this._url}/${idAgente}/${idSitio}`, {\r\n      responseType: 'blob',\r\n    });\r\n  }\r\n}\r\n","import {Component} from '@angular/core';\r\nimport {UtListService} from './components/utlist/services';\r\nimport {NotificationsService} from '@tune-up/core';\r\nimport html from './home.component.html';\r\nimport './home.component.css';\r\n\r\n@Component({\r\n  selector: 'tn-home',\r\n  template: html,\r\n  providers: [UtListService],\r\n})\r\nexport class HomeComponent {\r\n  allUts = [];\r\n  utsToShow = [];\r\n  constructor(\r\n    utListService: UtListService,\r\n    notificationService: NotificationsService\r\n  ) {\r\n    this._utListService = utListService;\r\n    this._notificationsService = notificationService;\r\n    this._getUts();\r\n  }\r\n  _getUts() {\r\n    this._getUtsSubscription = this._utListService.get().subscribe(\r\n      (data) => {\r\n        this.allUts = data;\r\n        this.utsToShow = data;\r\n      },\r\n      (error) =>\r\n        this._notificationsService.error(\r\n          'No se pudieron obtener las UTs',\r\n          error\r\n        )\r\n    );\r\n  }\r\n  filterUts = (idActivity, status) => {\r\n    this.utsToShow = this.allUts.filter(\r\n      (ut) =>\r\n        (idActivity === 'ALL' || ut.IdActividad === idActivity) &&\r\n        (status === 'ALL' ||\r\n          ut.Estado === status ||\r\n          (ut.Estado === 'ACTIVE' && status === 'DOING'))\r\n    );\r\n  };\r\n  ngOnDestroy() {\r\n    this._getUtsSubscription &&\r\n    !this._getUtsSubscription.closed &&\r\n    this._getUtsSubscription.unsubscribe();\r\n  }\r\n}\r\n","import {RouterModule} from '@angular/router';\r\nimport {NgModule} from '@angular/core';\r\nimport {HomeComponent} from './home.component';\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild([{path: '', component: HomeComponent}])],\r\n  exports: [RouterModule],\r\n})\r\nexport class HomeRoutingModule {}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class KanbanActivitiesService {\r\n  constructor(http: HttpClient) {\r\n    this._http = http;\r\n    this._url = 'ActividadesKanban2';\r\n  }\r\n  get(\r\n    idActividad = 'ALL',\r\n    idAgente = 'ALL',\r\n    idProducto = 'ALL',\r\n    idVersion = 'ALL',\r\n    idProyecto = 'ALL'\r\n  ) {\r\n    return this._http.get(\r\n      `${this._url}?idActividad=${idActividad}&idAgente=${idAgente}&idProducto=${idProducto}&idVersion=${idVersion}&idProyecto=${idProyecto}`\r\n    );\r\n  }\r\n}\r\n","import {Component, Input} from '@angular/core';\r\nimport {NotificationsService} from '@tune-up/core';\r\nimport {KanbanActivitiesService} from './services';\r\nimport html from './kanbanresume.component.html';\r\nimport './kanbanresume.component.css';\r\n\r\n@Component({\r\n  selector: 'tn-kanban-resume',\r\n  template: html,\r\n  providers: [KanbanActivitiesService],\r\n})\r\nexport class KanbanResumeComponent {\r\n  kanbanActivities = [];\r\n  selectedActivity = undefined;\r\n  @Input() filterUts;\r\n  constructor(\r\n    activitiesService: KanbanActivitiesService,\r\n    notificationsService: NotificationsService\r\n  ) {\r\n    this._activitiesService = activitiesService;\r\n    this._notificationsService = notificationsService;\r\n    this._getKanbanActivities();\r\n  }\r\n  _getKanbanActivities() {\r\n    this._getActivitiesSubscription = this._activitiesService.get().subscribe(\r\n      (data) => {\r\n        this.kanbanActivities = data;\r\n      },\r\n      (error) =>\r\n        this._notificationsService.error(\r\n          'No se pudieron obtener las actividades del Kanban Resumido',\r\n          error\r\n        )\r\n    );\r\n  }\r\n  filterKanbanActivies(idActivity = 'ALL', status = 'ALL') {\r\n    if (idActivity == -1) idActivity = 'ALL';\r\n    this.filterUts(idActivity, status);\r\n  }\r\n  ngOnDestroy() {\r\n    this._getActivitiesSubscription &&\r\n    !this._getActivitiesSubscription.closed &&\r\n    this._getActivitiesSubscription.unsubscribe();\r\n  }\r\n}\r\n","import {Component, Input} from '@angular/core';\r\nimport {NotificationsService, AgentService} from '@tune-up/core';\r\nimport {AgentPicService} from './services';\r\nimport html from './utlist.component.html';\r\nimport './utlist.component.css';\r\n\r\n// TODO: extract to a config file\r\nconst utTypesIcons = {\r\n  1: 'fa fa-star',\r\n  2: 'fa fa-bug',\r\n  3: 'fa fa-plus-circle',\r\n  4: 'fa fa-puzzle-piece',\r\n};\r\nconst workflowIcons = {\r\n  1: 'fa fa-arrow-up',\r\n  2: 'fa fa-repeat',\r\n  3: 'fa fa-cog',\r\n  4: 'fa fa-undo',\r\n  5: 'fa fa-refresh',\r\n};\r\nconst agentPics = {};\r\n\r\n@Component({\r\n  selector: 'tn-ut-list',\r\n  template: html,\r\n  providers: [AgentPicService],\r\n})\r\nexport class UtListComponent {\r\n  @Input() uts;\r\n  constructor(\r\n    agentPicService: AgentPicService,\r\n    notificationService: NotificationsService,\r\n    agentService: AgentService\r\n  ) {\r\n    this._agentPicService = agentPicService;\r\n    this._notificationsService = notificationService;\r\n    this._agentService = agentService;\r\n  }\r\n  getAgentPic = (ut) => {\r\n      const idAgente = ut.IdAgente;\r\n      if (idAgente) {\r\n        const idSitio = this._agentService.getSiteId();\r\n        if (!agentPics[idAgente]) {\r\n          this._agentPicService.get(idAgente, idSitio).subscribe((data) => {\r\n            agentPics[idAgente] = URL.createObjectURL(data);\r\n          });\r\n        }\r\n        return agentPics[idAgente] || '';\r\n      }\r\n      return '';\r\n  };\r\n  getUtTypeIcon = (ut) => {\r\n    return utTypesIcons[ut.IdTipoUT];\r\n  };\r\n  getStateIcon = (ut) => {\r\n    return workflowIcons[ut.IdTipoSeguimiento];\r\n  };\r\n  getUtLink = (ut) => {\r\n    return `/uts/${ut.IdUT}`;\r\n  };\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {HomeRoutingModule} from './home.routing';\r\nimport {HomeComponent} from './home.component';\r\nimport {TuneUpCoreModule} from '@tune-up/core';\r\nimport {KanbanResumeComponent, UtListComponent} from './components';\r\n\r\n@NgModule({\r\n  imports: [TuneUpCoreModule, HomeRoutingModule],\r\n  declarations: [\r\n    HomeComponent,\r\n    KanbanResumeComponent,\r\n    UtListComponent,\r\n  ],\r\n})\r\nexport class HomeModule {}\r\n"],"names":["UtListService","Injectable","http","_http","_url","idActividad","idAgente","idProducto","idVersion","idProyecto","this","get","HttpClient","AgentPicService","idSitio","HomeComponent","Component","utListService","notificationService","allUts","utsToShow","filterUts","idActivity","status","_this","filter","ut","IdActividad","Estado","_utListService","_notificationsService","_getUts","_getUtsSubscription","subscribe","data","error","_this2","closed","unsubscribe","NotificationsService","HomeRoutingModule","NgModule","RouterModule","forChild","path","component","KanbanActivitiesService","KanbanResumeComponent","Input","activitiesService","notificationsService","kanbanActivities","selectedActivity","undefined","_activitiesService","_getKanbanActivities","_getActivitiesSubscription","utTypesIcons","workflowIcons","agentPics","UtListComponent","agentPicService","agentService","getAgentPic","IdAgente","_agentService","getSiteId","_agentPicService","URL","createObjectURL","getUtTypeIcon","IdTipoUT","getStateIcon","IdTipoSeguimiento","getUtLink","IdUT","uts","AgentService","HomeModule","TuneUpCoreModule"],"mappings":"kjFAIaA,KADZC,oDAEaC,8BACLC,MAAQD,OACRE,KAAO,oFAGZC,yDAAc,MACdC,yDAAW,MACXC,yDAAa,MACbC,yDAAY,MACZC,yDAAa,aAENC,KAAKP,MAAMQ,IACbD,KAAKN,qBAAoBC,eAAwBC,iBAAuBC,gBAAwBC,iBAAwBC,wEAZ7GG,cADPZ,WCAAa,KADZZ,sDAEaC,gCACLC,MAAQD,OACRE,KAAO,4EAEVE,EAAUQ,UACLJ,KAAKP,MAAMQ,IAAOD,KAAKN,SAAQE,MAAYQ,gBAClC,gFANAF,cADPC,kZCOAE,KALZC,sBACW,8OAEEhB,0CAMViB,EACAC,yCAJFC,eACAC,kBAsBAC,UAAY,SAACC,EAAYC,KAClBH,UAAYI,EAAKL,OAAOM,OAC3B,SAACC,UACiB,QAAfJ,GAAwBI,EAAGC,cAAgBL,KAChC,QAAXC,GACCG,EAAGE,SAAWL,GACC,WAAdG,EAAGE,QAAkC,UAAXL,WAvB5BM,eAAiBZ,OACjBa,sBAAwBZ,OACxBa,0FAGAC,oBAAsBtB,KAAKmB,eAAelB,MAAMsB,UACnD,SAACC,KACMf,OAASe,IACTd,UAAYc,GAEnB,SAACC,UACCC,EAAKN,sBAAsBK,MACzB,iCACAA,4DAcDH,sBACJtB,KAAKsB,oBAAoBK,QAC1B3B,KAAKsB,oBAAoBM,mFAhCVtC,EACMuC,wBALZxB,eCHAyB,KAJZC,qBACWC,eAAaC,WAAWC,KAAM,GAAIC,UAAW9B,eAC7C2B,iFCFCI,KADZ7C,8DAEaC,wCACLC,MAAQD,OACRE,KAAO,8FAGZC,yDAAc,MACdC,yDAAW,MACXC,yDAAa,MACbC,yDAAY,MACZC,yDAAa,aAENC,KAAKP,MAAMQ,IACbD,KAAKN,qBAAoBC,eAAwBC,iBAAuBC,gBAAwBC,iBAAwBC,kFAZ7GG,cADPkC,iICOAC,KALZ/B,sBACW,02CAEE8B,OAKXE,yDAECC,EACAC,sCALFC,yBACAC,sBAAmBC,gDAMZC,mBAAqBL,OACrBnB,sBAAwBoB,OACxBK,yIAGAC,2BAA6B9C,KAAK4C,mBAAmB3C,MAAMsB,UAC9D,SAACC,KACMiB,iBAAmBjB,GAE1B,SAACC,UACCX,EAAKM,sBAAsBK,MACzB,6DACAA,6EAIab,yDAAa,MAAOC,yDAAS,OAC7B,GAAfD,IAAkBA,EAAa,YAC9BD,UAAUC,EAAYC,0DAGtBiC,6BACJ9C,KAAK8C,2BAA2BnB,QACjC3B,KAAK8C,2BAA2BlB,skBA5BzBjB,mEAEYyB,EACGP,wBANbQ,wQCJPU,KACD,eACA,cACA,sBACA,sBAECC,KACD,mBACA,iBACA,cACA,eACA,iBAECC,KAOOC,KALZ5C,sBACW,85DAEEH,OAGXmC,eACD,yBACEa,EACA3C,EACA4C,gFAMFC,YAAc,SAACrC,OACLpB,EAAWoB,EAAGsC,YAChB1D,EAAU,KACNQ,EAAUU,EAAKyC,cAAcC,mBAC9BP,EAAUrD,MACR6D,iBAAiBxD,IAAIL,EAAUQ,GAASmB,UAAU,SAACC,KAC5C5B,GAAY8D,IAAIC,gBAAgBnC,KAGvCyB,EAAUrD,IAAa,SAEzB,SAEXgE,cAAgB,SAAC5C,UACR+B,EAAa/B,EAAG6C,gBAEzBC,aAAe,SAAC9C,UACPgC,EAAchC,EAAG+C,yBAE1BC,UAAY,SAAChD,iBACIA,EAAGiD,WAxBbR,iBAAmBN,OACnB/B,sBAAwBZ,OACxB+C,cAAgBH,0hBARdc,6DAEU/D,EACI0B,uBACPsC,gBALLjB,WCbAkB,KARZrC,qBACWsC,mBAAkBvC,iBAE1BzB,EACAgC,EACAa"}