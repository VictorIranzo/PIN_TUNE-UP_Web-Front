!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("@angular/common/http"),require("@tune-up/core"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/router","@angular/common/http","@tune-up/core","@angular/platform-browser"],t):t((e.tuneUp=e.tuneUp||{},e.tuneUp.home={}),e.tuneUp.vendor.ngCore,e.tuneUp.vendor.ngRouter,e.tuneUp.vendor.ngCommonHttp,e.tuneUp.app,e.tuneUp.vendor.ngPlatformBrowser)}(this,function(e,t,n,i,r,a){"use strict";function __$styleInject(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");return i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t}function _initDefineProp(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function _initDefineProp$1(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}!function(){function AwaitValue(e){this.value=e}function AsyncGenerator(e){function resume(t,n){try{var i=e[t](n),r=i.value;r instanceof AwaitValue?Promise.resolve(r.value).then(function(e){resume("next",e)},function(e){resume("throw",e)}):settle(i.done?"return":"normal",i.value)}catch(e){settle("throw",e)}}function settle(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?resume(t.key,t.arg):n=null}var t,n;this._invoke=function send(e,i){return new Promise(function(r,a){var o={key:e,arg:i,resolve:r,reject:a,next:null};n?n=n.next=o:(t=n=o,resume(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)}}();var o,s,u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),c=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},d=(o=t.Injectable())(s=function(){function UtListService(e){u(this,UtListService),this._http=e,this._url="SeguimientosKanban"}return l(UtListService,[{key:"get",value:function get$$1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ALL",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALL",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ALL",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ALL",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ALL";return this._http.get(this._url+"?idActividad="+e+"&idAgente="+t+"&idProducto="+n+"&idVersion="+i+"&idProyecto="+r)}}]),UtListService}())||s;Reflect.defineMetadata("design:paramtypes",[i.HttpClient],d);var p,f,m=(p=t.Injectable())(f=function(){function AgentPicService(e){u(this,AgentPicService),this._http=e,this._url="Agentes/Imagen"}return l(AgentPicService,[{key:"get",value:function get$$1(e,t){return this._http.get(this._url+"/"+e+"/"+t,{responseType:"blob"})}}]),AgentPicService}())||f;Reflect.defineMetadata("design:paramtypes",[i.HttpClient],m);__$styleInject(".tn-home__utlist{margin:16px;z-index:0;overflow-x:overlay;text-align:center;width:75%}.tn-home__kanbanresume{margin-top:16px;margin-bottom:16px;margin-left:16px;width:25%}",void 0);var v,h,g=(v=t.Component({selector:"tn-home",template:'<div class="horizontal">\n  <tn-kanban-resume class="tn-home__kanbanresume" [filterUts]="filterUts"></tn-kanban-resume>\n  <tn-ut-list class="tn-home__utlist" [uts]="utsToShow"></tn-ut-list>\n</div>\n',providers:[d]}))(h=function(){function HomeComponent(e,t){var n=this;u(this,HomeComponent),this.filterUts=function(e,t){n.utsToShow=n.allUts.filter(function(e){return"ALL"===t||e.Estado===t})},this._utListService=e,this._notificationsService=t,this.allUts=[],this.utsToShow=[],this._getUts()}return l(HomeComponent,[{key:"_getUts",value:function _getUts(){var e=this;this._utListService.get().subscribe(function(t){t.Exito?(e.allUts=t.Resultado,e.utsToShow=t.Resultado):e._notificationsService.error("No se pudieron obtener las UTs",t.Mensaje)},function(t){return e._notificationsService.error("No se pudieron obtener las UTs",t)})}}]),HomeComponent}())||h;Reflect.defineMetadata("design:paramtypes",[d,r.NotificationsService],g);var b,_,y,A,S=(b=t.NgModule({imports:[n.RouterModule.forChild([{path:"",component:g}])],exports:[n.RouterModule]}))(_=function HomeRoutingModule(){u(this,HomeRoutingModule)})||_,w=(y=t.Injectable())(A=function(){function KanbanActivitiesService(e){u(this,KanbanActivitiesService),this._http=e,this._url="ActividadesKanban2"}return l(KanbanActivitiesService,[{key:"get",value:function get$$1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ALL",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALL",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ALL",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ALL",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ALL";return this._http.get(this._url+"?idActividad="+e+"&idAgente="+t+"&idProducto="+n+"&idVersion="+i+"&idProyecto="+r)}}]),KanbanActivitiesService}())||A;Reflect.defineMetadata("design:paramtypes",[i.HttpClient],w);__$styleInject(".tn-home-kanban_resume--span{overflow:auto;display:block;padding:0!important;margin:0}",void 0);var L,U,k,I,T,x=(L=t.Component({selector:"tn-kanban-resume",template:'<div class ="horizontal">\n    <p-dataTable [value]="kanbanActivities" [responsive]="true">\n        <p-column header="Actividad">            \n                <ng-template let-activity="rowData" let-i="rowIndex" pTemplate="body">\n                    <span (click)="filterKanbanActivies(activity.IdActividad, \'ALL\')" class="tn-home-kanban_resume--span">{{activity.NombreActividad}}</span>\n                </ng-template>\n            </p-column>       \n        <p-column header="To Do" [style]="{\'width\':\'20%\'}">            \n            <ng-template let-activity="rowData" let-i="rowIndex" pTemplate="body">\n                <span (click)="filterKanbanActivies(activity.IdActividad, \'TO DO\')" class="tn-home-kanban_resume--span">{{activity.NumSeguimientosPendiente}}</span>\n            </ng-template>\n        </p-column>   \n        <p-column header="Doing" [style]="{\'width\':\'20%\'}">            \n            <ng-template let-activity="rowData" let-i="rowIndex" pTemplate="body" >\n                <span (click)="filterKanbanActivies(activity.IdActividad, \'ACTIVE\')" class="tn-home-kanban_resume--span">{{activity.NumSeguimientosProgreso}}</span>\n            </ng-template>\n        </p-column>                \n    </p-dataTable>\n</div>\n',providers:[w]}),U=t.Input(),L((I=function(){function KanbanResumeComponent(e,t){u(this,KanbanResumeComponent),this.kanbanActivities=[],this.selectedActivity=void 0,_initDefineProp(this,"filterUts",T,this),this._activitiesService=e,this._notificationsService=t,this._getKanbanActivities()}return l(KanbanResumeComponent,[{key:"_getKanbanActivities",value:function _getKanbanActivities(){var e=this;this._activitiesService.get().subscribe(function(t){t.Exito?e.kanbanActivities=t.Resultado:e._notificationsService.error("No se pudieron obtener las actividades del Kanban Resumido",t.Mensaje)},function(t){return e._notificationsService.error("No se pudieron obtener las actividades del Kanban Resumido",t)})}},{key:"filterKanbanActivies",value:function filterKanbanActivies(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ALL",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALL";this.filterUts(e,t)}}]),KanbanResumeComponent}(),T=function _applyDecoratedDescriptor(e,t,n,i,r){var a={};return Object.keys(i).forEach(function(e){a[e]=i[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}(I.prototype,"filterUts",[U],{enumerable:!0,initializer:function initializer(){return this.filterUts}}),k=I))||k);Reflect.defineMetadata("design:paramtypes",[w,r.NotificationsService],x);__$styleInject(".tn-home__utlist__searchbar{padding:16px;border-bottom:0}.tn_home__utlist__searchbar__icon{margin-top:4px;margin-right:8px}.tn-home__utlist__searchbar__input{width:100%}.tn-home__utlist__agent__pic{width:40px;height:40px}",void 0);var P,C,z,R,j,M={1:"fa fa-star",2:"fa fa-bug",3:"fa fa-plus-circle",4:"fa fa-puzzle-piece"},K={1:"fa fa-arrow-up",2:"fa fa-repeat",3:"fa fa-cog",4:"fa fa-undo",5:"fa fa-refresh"},H={},N=(P=t.Component({selector:"tn-ut-list",template:'<div class="ui-widget-header none horizontal tn-home__utlist__searchbar">\n  <i class="fa fa-search none tn_home__utlist__searchbar__icon"></i>\n  <input #gb type="text" pInputText size="50" class="tn-home__utlist__searchbar__input" placeholder="Búsqueda global">\n</div>\n<p-dataTable [value]="uts" [rows]="20" [paginator]="true" [pageLinks]="5" [sortMode]="multiple" [globalFilter]="gb" reorderableColumns="true">\n  <p-column [style]="{\'width\':\'10%\'}" field="Estado" header="Estado" [sortable]="true">\n    <ng-template let-ut="rowData" pTemplate="body">\n      <span class="ui-button-icon" [ngClass]="getUtTypeIcon(ut)"></span>\n      <span class="ui-button-icon" [ngClass]="getStateIcon(ut)"></span>\n    </ng-template>\n  </p-column>\n  <p-column [style]="{\'width\':\'10%\'}" field="IdAgente" header="Agente" [sortable]="true">\n    <ng-template let-ut="rowData" pTemplate="body">\n      <img *ngIf="ut.IdAgente" class="tn-home__utlist__agent__pic" [src]="getAgentPic(ut) | safeHtml">\n      <i *ngIf="ut.IdAgente === -1" class="fa fa-2x fa-users"></i>\n    </ng-template>\n  </p-column>\n  <p-column [style]="{\'width\':\'30%\'}" field="NombreProyecto" header="Producto/Servicio" [sortable]="true"></p-column>\n  <p-column [style]="{\'width\':\'10%\'}" field="NombreVersion" header="Sprint" [sortable]="true"></p-column>\n  <p-column [style]="{\'width\':\'10%\'}" field="IdUT" header="Código" [sortable]="true">\n    <ng-template let-ut="rowData" pTemplate="body">\n      <span class="ui-cell-data" [routerLink]="getUtLink(ut)">{{ut.IdUT}}</span>\n    </ng-template>\n  </p-column>\n  <p-column [style]="{\'width\':\'30%\'}" field="NombreUT" header="Nombre" [sortable]="true"></p-column>\n</p-dataTable>\n',providers:[m]}),C=t.Input(),P((R=function(){function UtListComponent(e,t,n){var i=this;u(this,UtListComponent),_initDefineProp$1(this,"uts",j,this),this.getAgentPic=function(e){var t=e.IdAgente;if(t){var n=i._agentService.getSiteId();return H[t]||i._agentPicService.get(t,n).subscribe(function(e){H[t]=URL.createObjectURL(e)}),H[t]}},this.getUtTypeIcon=function(e){return M[e.IdTipoUT]},this.getStateIcon=function(e){return K[e.IdTipoSeguimiento]},this.getUtLink=function(e){return"uts/"+e.id},this._agentPicService=e,this._notificationsService=t,this._agentService=n}return l(UtListComponent,[{key:"setImgSrc",value:function setImgSrc(){[].concat(c(document.getElementsByClassName("tn-home__utlist__agent__pic"))).map(function(e){return e.src=e.getAttribute("data-src")})}}]),UtListComponent}(),j=function _applyDecoratedDescriptor$1(e,t,n,i,r){var a={};return Object.keys(i).forEach(function(e){a[e]=i[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}(R.prototype,"uts",[C],{enumerable:!0,initializer:function initializer(){return this.uts}}),z=R))||z);Reflect.defineMetadata("design:paramtypes",[m,r.NotificationsService,r.AgentService],N);var D,$,E=(D=t.Pipe({name:"safeHtml"}))($=function(){function SafeHtml(e){u(this,SafeHtml),this.sanitizer=e}return l(SafeHtml,[{key:"transform",value:function transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}}]),SafeHtml}())||$;Reflect.defineMetadata("design:paramtypes",[a.DomSanitizer],E);var O,q,V=(O=t.NgModule({imports:[r.TuneUpCoreModule,S],declarations:[g,x,N,E]}))(q=function HomeModule(){u(this,HomeModule)})||q;e.HomeModule=V,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=tune-up.home.umd.min.js.map
