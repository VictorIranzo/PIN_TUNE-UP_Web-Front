!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("@tune-up/core"),require("@angular/common/http"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/router","@tune-up/core","@angular/common/http","@angular/platform-browser"],t):t((e.tuneUp=e.tuneUp||{},e.tuneUp.home={}),e.tuneUp.vendor.ngCore,e.tuneUp.vendor.ngRouter,e.tuneUp.app,e.tuneUp.vendor.ngCommonHttp,e.tuneUp.vendor.ngPlatformBrowser)}(this,function(e,t,n,r,o,i){"use strict";function __$styleInject(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");return r.type="text/css",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),t}__$styleInject(".tn-home__utlist{margin:16px;z-index:0;overflow-x:overlay;text-align:center}",void 0);!function(){function AwaitValue(e){this.value=e}function AsyncGenerator(e){function resume(t,n){try{var r=e[t](n),o=r.value;o instanceof AwaitValue?Promise.resolve(o.value).then(function(e){resume("next",e)},function(e){resume("throw",e)}):settle(r.done?"return":"normal",r.value)}catch(e){settle("throw",e)}}function settle(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?resume(t.key,t.arg):n=null}var t,n;this._invoke=function send(e,r){return new Promise(function(o,i){var a={key:e,arg:r,resolve:o,reject:i,next:null};n?n=n.next=a:(t=n=a,resume(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)}}();var a,u,s,c,l,p,d,f,m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},h=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),g=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},_=(a=t.Component({selector:"tn-home",template:'<div class="horizontal">\r\n  <tn-kanban-resume class="none"></tn-kanban-resume>\r\n  <tn-ut-list class="one tn-home__utlist"></tn-ut-list>\r\n</div>\r\n'}))(u=function HomeComponent(){m(this,HomeComponent)})||u,v=(s=t.NgModule({imports:[n.RouterModule.forChild([{path:"",component:_}])],exports:[n.RouterModule]}))(c=function HomeRoutingModule(){m(this,HomeRoutingModule)})||c,y=(l=t.Component({selector:"tn-kanban-resume",template:"KANBAN RESUMIDO\n"}))(p=function KanbanResumeComponent(){m(this,KanbanResumeComponent)})||p,b=(d=t.Injectable())(f=function(){function UtListService(e){m(this,UtListService),this._http=e,this._url="SeguimientosKanban"}return h(UtListService,[{key:"get",value:function get$$1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ALL",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ALL",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ALL",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ALL",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ALL";return this._http.get(this._url+"?idActividad="+e+"&idAgente="+t+"&idProducto="+n+"&idVersion="+r+"&idProyecto="+o)}}]),UtListService}())||f;Reflect.defineMetadata("design:paramtypes",[o.HttpClient],b);var S,A,U=(S=t.Injectable())(A=function(){function AgentPicService(e){m(this,AgentPicService),this._http=e,this._url="Agentes/Imagen"}return h(AgentPicService,[{key:"get",value:function get$$1(e,t){return this._http.get(this._url+"/"+e+"/"+t,{responseType:"blob"})}}]),AgentPicService}())||A;Reflect.defineMetadata("design:paramtypes",[o.HttpClient],U);__$styleInject(".tn-home__utlist__searchbar{padding:16px;border-bottom:0}.tn_home__utlist__searchbar__icon{margin-top:4px;margin-right:8px}.tn-home__utlist__searchbar__input{width:100%}.tn-home__utlist__agent__pic{width:40px;height:40px}",void 0);var w,x,I={1:"fa fa-star",2:"fa fa-bug",3:"fa fa-plus-circle",4:"fa fa-puzzle-piece"},C={1:"fa fa-arrow-up",2:"fa fa-repeat",3:"fa fa-cog",4:"fa fa-undo",5:"fa fa-refresh"},L={},P=(w=t.Component({selector:"tn-ut-list",template:'<div class="ui-widget-header none horizontal tn-home__utlist__searchbar">\n  <i class="fa fa-search none tn_home__utlist__searchbar__icon"></i>\n  <input #gb type="text" pInputText size="50" class="tn-home__utlist__searchbar__input" placeholder="Búsqueda global">\n</div>\n<p-dataTable [value]="uts" [rows]="20" [paginator]="true" [pageLinks]="5" [sortMode]="multiple" [globalFilter]="gb" reorderableColumns="true">\n  <p-column [style]="{\'width\':\'10%\'}" field="Estado" header="Estado" [sortable]="true">\n    <ng-template let-ut="rowData" pTemplate="body">\n      <span class="ui-button-icon" [ngClass]="getUtTypeIcon(ut)"></span>\n      <span class="ui-button-icon" [ngClass]="getStateIcon(ut)"></span>\n    </ng-template>\n  </p-column>\n  <p-column [style]="{\'width\':\'10%\'}" field="IdAgente" header="Agente" [sortable]="true">\n    <ng-template let-ut="rowData" pTemplate="body">\n      <img *ngIf="ut.IdAgente" class="tn-home__utlist__agent__pic" [src]="getAgentPic(ut) | safeHtml">\n      <i *ngIf="ut.IdAgente === -1" class="fa fa-2x fa-users"></i>\n    </ng-template>\n  </p-column>\n  <p-column [style]="{\'width\':\'30%\'}" field="NombreProyecto" header="Producto/Servicio" [sortable]="true"></p-column>\n  <p-column [style]="{\'width\':\'10%\'}" field="NombreVersion" header="Sprint" [sortable]="true"></p-column>\n  <p-column [style]="{\'width\':\'10%\'}" field="IdUT" header="Código" [sortable]="true"></p-column>\n  <p-column [style]="{\'width\':\'30%\'}" field="NombreUT" header="Nombre" [sortable]="true"></p-column>\n</p-dataTable>\n',providers:[b,U]}))(x=function(){function UtListComponent(e,t,n,r){var o=this;m(this,UtListComponent),this.getAgentPic=function(e){var t=e.IdAgente;if(t){var n=o._agentService.getSiteId();return L[t]||o._agentPicService.get(t,n).subscribe(function(e){L[t]=URL.createObjectURL(e)}),L[t]}},this.getUtTypeIcon=function(e){return I[e.IdTipoUT]},this.getStateIcon=function(e){return C[e.IdTipoSeguimiento]},this._utListService=e,this._agentPicService=t,this._notificationsService=n,this._agentService=r,this.uts=[],this._getUts()}return h(UtListComponent,[{key:"_getUts",value:function _getUts(){var e=this;this._utListService.get().subscribe(function(t){t.Exito?e.uts=t.Resultado:e._notificationsService.error("No se pudieron obtener las UTs",t.Mensaje)},function(t){return e._notificationsService.error("No se pudieron obtener las UTs",t)})}},{key:"setImgSrc",value:function setImgSrc(){[].concat(g(document.getElementsByClassName("tn-home__utlist__agent__pic"))).map(function(e){return e.src=e.getAttribute("data-src")})}}]),UtListComponent}())||x;Reflect.defineMetadata("design:paramtypes",[b,U,r.NotificationsService,r.AgentService],P);var T,k,M=(T=t.Pipe({name:"safeHtml"}))(k=function(){function SafeHtml(e){m(this,SafeHtml),this.sanitizer=e}return h(SafeHtml,[{key:"transform",value:function transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}}]),SafeHtml}())||k;Reflect.defineMetadata("design:paramtypes",[i.DomSanitizer],M);var H,R,N=(H=t.NgModule({imports:[r.TuneUpCoreModule,v],declarations:[_,y,P,M]}))(R=function HomeModule(){m(this,HomeModule)})||R;e.HomeModule=N,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=tune-up.home.umd.min.js.map
