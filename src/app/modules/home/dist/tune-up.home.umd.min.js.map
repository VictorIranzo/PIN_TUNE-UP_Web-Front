{"version":3,"file":"tune-up.home.umd.min.js","sources":["../src/components/utlist/services/utlist.service.js","../src/components/utlist/services/agentpic.service.js","../src/home.component.js","../src/home.routing.js","../src/components/kanbanresume/services/kanbanactivities.service.js","../src/components/kanbanresume/kanbanresume.component.js","../src/components/utlist/utlist.component.js","../src/components/utlist/pic.sanitizer.js","../src/home.module.js"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable()\nexport class UtListService {\n  constructor(http: HttpClient) {\n    this._http = http;\n    this._url = 'SeguimientosKanban';\n  }\n  get(\n    idActividad = 'ALL',\n    idAgente = 'ALL',\n    idProducto = 'ALL',\n    idVersion = 'ALL',\n    idProyecto = 'ALL'\n  ) {\n    return this._http.get(\n      `${this._url}?idActividad=${idActividad}&idAgente=${idAgente}&idProducto=${idProducto}&idVersion=${idVersion}&idProyecto=${idProyecto}`\n    );\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable()\nexport class AgentPicService {\n  constructor(http: HttpClient) {\n    this._http = http;\n    this._url = 'Agentes/Imagen';\n  }\n  get(idAgente, idSitio) {\n    return this._http.get(`${this._url}/${idAgente}/${idSitio}`, {\n      responseType: 'blob',\n    });\n  }\n}\n","import {Component} from '@angular/core';\nimport {UtListService} from './components/utlist/services';\nimport {NotificationsService} from '@tune-up/core';\nimport html from './home.component.html';\nimport './home.component.css';\n\n@Component({\n  selector: 'tn-home',\n  template: html,\n  providers: [UtListService],\n})\nexport class HomeComponent {\n  allUts = [];\n  utsToShow = [];\n  constructor(\n    utListService: UtListService,\n    notificationService: NotificationsService\n  ) {\n    this._utListService = utListService;\n    this._notificationsService = notificationService;\n    this._getUts();\n  }\n  _getUts() {\n    // TODO: refactor\n    this._utListService.get().subscribe(\n      (data) => {\n        if (!data.Exito) {\n          this._notificationsService.error(\n            'No se pudieron obtener las UTs',\n            data.Mensaje\n          );\n          return;\n        }\n        this.allUts = data.Resultado;\n        this.utsToShow = data.Resultado;\n      },\n      (error) =>\n        this._notificationsService.error(\n          'No se pudieron obtener las UTs',\n          error\n        )\n    );\n  }\n  filterUts = (idActivity, status) => {\n    this.utsToShow = this.allUts.filter(\n      (ut) =>\n        // TODO: filter by activity\n        // (idActivity === 'ALL' || ut.IdActividad === idActivity) &&\n        status === 'ALL' ||\n        ut.Estado === status ||\n        (ut.Estado === 'ACTIVE' && status === 'DOING')\n    );\n  };\n}\n","import {RouterModule} from '@angular/router';\nimport {NgModule} from '@angular/core';\nimport {HomeComponent} from './home.component';\n\n@NgModule({\n  imports: [RouterModule.forChild([{path: '', component: HomeComponent}])],\n  exports: [RouterModule],\n})\nexport class HomeRoutingModule {}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable()\nexport class KanbanActivitiesService {\n  constructor(http: HttpClient) {\n    this._http = http;\n    this._url = 'ActividadesKanban2';\n  }\n  get(\n    idActividad = 'ALL',\n    idAgente = 'ALL',\n    idProducto = 'ALL',\n    idVersion = 'ALL',\n    idProyecto = 'ALL'\n  ) {\n    return this._http.get(\n      `${this._url}?idActividad=${idActividad}&idAgente=${idAgente}&idProducto=${idProducto}&idVersion=${idVersion}&idProyecto=${idProyecto}`\n    );\n  }\n}\n","import {Component, Input} from '@angular/core';\nimport {NotificationsService} from '@tune-up/core';\nimport {KanbanActivitiesService} from './services';\nimport html from './kanbanresume.component.html';\nimport './kanbanresume.component.css';\n\n@Component({\n  selector: 'tn-kanban-resume',\n  template: html,\n  providers: [KanbanActivitiesService],\n})\nexport class KanbanResumeComponent {\n  kanbanActivities = [];\n  selectedActivity = undefined;\n  @Input() filterUts;\n  constructor(\n    activitiesService: KanbanActivitiesService,\n    notificationsService: NotificationsService\n  ) {\n    this._activitiesService = activitiesService;\n    this._notificationsService = notificationsService;\n    this._getKanbanActivities();\n  }\n  _getKanbanActivities() {\n    // TODO: refactor\n    this._activitiesService.get().subscribe(\n      (data) => {\n        if (!data.Exito) {\n          this._notificationsService.error(\n            'No se pudieron obtener las actividades del Kanban Resumido',\n            data.Mensaje\n          );\n          return;\n        }\n        this.kanbanActivities = data.Resultado;\n      },\n      (error) =>\n        this._notificationsService.error(\n          'No se pudieron obtener las actividades del Kanban Resumido',\n          error\n        )\n    );\n  }\n  filterKanbanActivies(idActivity = 'ALL', status = 'ALL') {\n    this.filterUts(idActivity, status);\n  }\n}\n","import {Component, Input} from '@angular/core';\nimport {NotificationsService, AgentService} from '@tune-up/core';\nimport {AgentPicService} from './services';\nimport html from './utlist.component.html';\nimport './utlist.component.css';\n\n// TODO: extract to a config file\nconst utTypesIcons = {\n  1: 'fa fa-star',\n  2: 'fa fa-bug',\n  3: 'fa fa-plus-circle',\n  4: 'fa fa-puzzle-piece',\n};\nconst workflowIcons = {\n  1: 'fa fa-arrow-up',\n  2: 'fa fa-repeat',\n  3: 'fa fa-cog',\n  4: 'fa fa-undo',\n  5: 'fa fa-refresh',\n};\nconst agentPics = {};\n\n@Component({\n  selector: 'tn-ut-list',\n  template: html,\n  providers: [AgentPicService],\n})\nexport class UtListComponent {\n  @Input() uts;\n  constructor(\n    agentPicService: AgentPicService,\n    notificationService: NotificationsService,\n    agentService: AgentService\n  ) {\n    this._agentPicService = agentPicService;\n    this._notificationsService = notificationService;\n    this._agentService = agentService;\n  }\n  getAgentPic = (ut) => {\n    // TODO: experiment with async pipe\n    const idAgente = ut.IdAgente;\n    if (idAgente) {\n      const idSitio = this._agentService.getSiteId();\n      if (!agentPics[idAgente]) {\n        // TODO: refactor\n        this._agentPicService.get(idAgente, idSitio).subscribe((data) => {\n          agentPics[idAgente] = URL.createObjectURL(data);\n        });\n      }\n      return agentPics[idAgente];\n    }\n    // TODO: return transparent png image\n    return '';\n  };\n  getUtTypeIcon = (ut) => {\n    return utTypesIcons[ut.IdTipoUT];\n  };\n  getStateIcon = (ut) => {\n    return workflowIcons[ut.IdTipoSeguimiento];\n  };\n  getUtLink = (ut) => {\n    return `uts/${ut.id}`;\n  };\n}\n","import {Pipe} from '@angular/core';\nimport {DomSanitizer} from '@angular/platform-browser';\n// TODO: move to core\n@Pipe({name: 'safeHtml'})\nexport class SafeHtml {\n  constructor(sanitizer: DomSanitizer) {\n    this.sanitizer = sanitizer;\n  }\n  transform(html) {\n    if (html === '') return '';\n    return this.sanitizer.bypassSecurityTrustResourceUrl(html);\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {HomeRoutingModule} from './home.routing';\nimport {HomeComponent} from './home.component';\nimport {TuneUpCoreModule} from '@tune-up/core';\nimport {KanbanResumeComponent, UtListComponent, SafeHtml} from './components';\n\n@NgModule({\n  imports: [TuneUpCoreModule, HomeRoutingModule],\n  declarations: [\n    HomeComponent,\n    KanbanResumeComponent,\n    UtListComponent,\n    // TODO: move SafeHtml to core\n    SafeHtml,\n  ],\n})\nexport class HomeModule {}\n"],"names":["UtListService","Injectable","http","_http","_url","idActividad","idAgente","idProducto","idVersion","idProyecto","get","HttpClient","AgentPicService","idSitio","HomeComponent","Component","html","utListService","notificationService","allUts","utsToShow","filterUts","idActivity","status","filter","ut","Estado","_utListService","_notificationsService","_getUts","subscribe","data","Exito","error","Mensaje","Resultado","NotificationsService","HomeRoutingModule","NgModule","RouterModule","forChild","path","component","KanbanActivitiesService","KanbanResumeComponent","Input","activitiesService","notificationsService","kanbanActivities","selectedActivity","undefined","_activitiesService","_getKanbanActivities","utTypesIcons","workflowIcons","agentPics","UtListComponent","agentPicService","agentService","getAgentPic","IdAgente","_agentService","getSiteId","_agentPicService","URL","createObjectURL","getUtTypeIcon","IdTipoUT","getStateIcon","IdTipoSeguimiento","getUtLink","id","uts","AgentService","SafeHtml","Pipe","name","sanitizer","bypassSecurityTrustResourceUrl","DomSanitizer","HomeModule","TuneUpCoreModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAIaA,aAAb,aADCC,iBACD;yBACcC,OAAZ,EAA8B;;;SACvBC,KAAL,GAAaD,OAAb;SACKE,IAAL,GAAY,oBAAZ;;;;;6BAQA;UALAC,WAKA,uEALc,KAKd;UAJAC,QAIA,uEAJW,KAIX;UAHAC,UAGA,uEAHa,KAGb;UAFAC,SAEA,uEAFY,KAEZ;UADAC,UACA,uEADa,KACb;;aACO,KAAKN,KAAL,CAAWO,GAAX,CACF,KAAKN,IADH,qBACuBC,WADvB,kBAC+CC,QAD/C,oBACsEC,UADtE,mBAC8FC,SAD9F,oBACsHC,UADtH,CAAP;;;;;6CAXgBE,kBADPX;;;;;ACJb,IAIaY,eAAb,aADCX,iBACD;2BACcC,OAAZ,EAA8B;;;SACvBC,KAAL,GAAaD,OAAb;SACKE,IAAL,GAAY,gBAAZ;;;;;2BAEEE,QALN,EAKgBO,OALhB,EAKyB;aACd,KAAKV,KAAL,CAAWO,GAAX,CAAkB,KAAKN,IAAvB,SAA+BE,QAA/B,SAA2CO,OAA3C,EAAsD;sBAC7C;OADT,CAAP;;;;;6CALgBF,kBADPC;;;;;;;;;ACJb,IAWaE,aAAb,aALCC,eAAU;YACC,SADD;YAECC,IAFD;aAGE,CAAChB,aAAD;CAHZ,CAKD;yBAIIiB,aADF,EAEEC,mBAFF,EAGE;;;;SALFC,MAKE,GALO,EAKP;SAJFC,SAIE,GAJU,EAIV;;SA0BFC,SA1BE,GA0BU,UAACC,UAAD,EAAaC,MAAb,EAAwB;YAC7BH,SAAL,GAAiB,MAAKD,MAAL,CAAYK,MAAZ,CACf,UAACC,EAAD;;;;qBAGa,KAAX,IACAA,GAAGC,MAAH,KAAcH,MADd,IAECE,GAAGC,MAAH,KAAc,QAAd,IAA0BH,WAAW;;OANzB,CAAjB;KA3BA;;SACKI,cAAL,GAAsBV,aAAtB;SACKW,qBAAL,GAA6BV,mBAA7B;SACKW,OAAL;;;;;8BAEQ;;;;WAEHF,cAAL,CAAoBjB,GAApB,GAA0BoB,SAA1B,CACE,UAACC,IAAD,EAAU;YACJ,CAACA,KAAKC,KAAV,EAAiB;iBACVJ,qBAAL,CAA2BK,KAA3B,CACE,gCADF,EAEEF,KAAKG,OAFP;;;eAMGf,MAAL,GAAcY,KAAKI,SAAnB;eACKf,SAAL,GAAiBW,KAAKI,SAAtB;OAVJ,EAYE,UAACF,KAAD;eACE,OAAKL,qBAAL,CAA2BK,KAA3B,CACE,gCADF,EAEEA,KAFF,CADF;OAZF;;;;;6CATejC,eACMoC,8BALZtB;;;;;ACXb,IAQauB,iBAAb,aAJCC,cAAS;WACC,CAACC,oBAAaC,QAAb,CAAsB,CAAC,EAACC,MAAM,EAAP,EAAWC,WAAW5B,aAAtB,EAAD,CAAtB,CAAD,CADD;WAEC,CAACyB,mBAAD;CAFV,CAID;;;;;;;ACRA,IAIaI,uBAAb,aADC1C,iBACD;mCACcC,OAAZ,EAA8B;;;SACvBC,KAAL,GAAaD,OAAb;SACKE,IAAL,GAAY,oBAAZ;;;;;6BAQA;UALAC,WAKA,uEALc,KAKd;UAJAC,QAIA,uEAJW,KAIX;UAHAC,UAGA,uEAHa,KAGb;UAFAC,SAEA,uEAFY,KAEZ;UADAC,UACA,uEADa,KACb;;aACO,KAAKN,KAAL,CAAWO,GAAX,CACF,KAAKN,IADH,qBACuBC,WADvB,kBAC+CC,QAD/C,oBACsEC,UADtE,mBAC8FC,SAD9F,oBACsHC,UADtH,CAAP;;;;;6CAXgBE,kBADPgC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICOAC,qBAAb,aALC7B,eAAU;YACC,kBADD;YAECC,MAFD;aAGE,CAAC2B,uBAAD;CAHZ,CAKD,UAGGE,YAHH;iCAKIC,iBADF,EAEEC,oBAFF,EAGE;;SANFC,gBAME,GANiB,EAMjB;SALFC,gBAKE,GALiBC,SAKjB;;;;SACKC,kBAAL,GAA0BL,iBAA1B;SACKlB,qBAAL,GAA6BmB,oBAA7B;SACKK,oBAAL;;;;;2CAEqB;;;;WAEhBD,kBAAL,CAAwBzC,GAAxB,GAA8BoB,SAA9B,CACE,UAACC,IAAD,EAAU;YACJ,CAACA,KAAKC,KAAV,EAAiB;gBACVJ,qBAAL,CAA2BK,KAA3B,CACE,4DADF,EAEEF,KAAKG,OAFP;;;cAMGc,gBAAL,GAAwBjB,KAAKI,SAA7B;OATJ,EAWE,UAACF,KAAD;eACE,MAAKL,qBAAL,CAA2BK,KAA3B,CACE,4DADF,EAEEA,KAFF,CADF;OAXF;;;;2CAkBuD;UAApCX,UAAoC,uEAAvB,KAAuB;UAAhBC,MAAgB,uEAAP,KAAO;;WAClDF,SAAL,CAAeC,UAAf,EAA2BC,MAA3B;;;;;;;gBA9BOF,SAHX;;;6CAKuBsB,yBACGP,8BANbQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLb;AACA,IAAMS,eAAe;KAChB,YADgB;KAEhB,WAFgB;KAGhB,mBAHgB;KAIhB;CAJL;AAMA,IAAMC,gBAAgB;KACjB,gBADiB;KAEjB,cAFiB;KAGjB,WAHiB;KAIjB,YAJiB;KAKjB;CALL;AAOA,IAAMC,YAAY,EAAlB;;AAOA,IAAaC,eAAb,aALCzC,eAAU;YACC,YADD;YAECC,MAFD;aAGE,CAACJ,eAAD;CAHZ,CAKD,YACGiC,YADH,iCAEE,yBACEY,eADF,EAEEvC,mBAFF,EAGEwC,YAHF,EAIE;;;;;;;OAKFC,WALE,GAKY,UAAClC,EAAD,EAAQ;;QAEdnB,WAAWmB,GAAGmC,QAApB;QACItD,QAAJ,EAAc;UACNO,UAAU,MAAKgD,aAAL,CAAmBC,SAAnB,EAAhB;UACI,CAACP,UAAUjD,QAAV,CAAL,EAA0B;;cAEnByD,gBAAL,CAAsBrD,GAAtB,CAA0BJ,QAA1B,EAAoCO,OAApC,EAA6CiB,SAA7C,CAAuD,UAACC,IAAD,EAAU;oBACrDzB,QAAV,IAAsB0D,IAAIC,eAAJ,CAAoBlC,IAApB,CAAtB;SADF;;aAIKwB,UAAUjD,QAAV,CAAP;;;WAGK,EAAP;GAnBA;;OAqBF4D,aArBE,GAqBc,UAACzC,EAAD,EAAQ;WACf4B,aAAa5B,GAAG0C,QAAhB,CAAP;GAtBA;;OAwBFC,YAxBE,GAwBa,UAAC3C,EAAD,EAAQ;WACd6B,cAAc7B,GAAG4C,iBAAjB,CAAP;GAzBA;;OA2BFC,SA3BE,GA2BU,UAAC7C,EAAD,EAAQ;oBACJA,GAAG8C,EAAjB;GA5BA;;OACKR,gBAAL,GAAwBN,eAAxB;OACK7B,qBAAL,GAA6BV,mBAA7B;OACK2C,aAAL,GAAqBH,YAArB;CATJ;;;gBACWc,GADX;;;6CAGqB5D,iBACIwB,6BACPqC,sBALLjB;;;;;AC3Bb,AAEA;;AAEA,IAAakB,QAAb,aADCC,UAAK,EAACC,MAAM,UAAP,EAAL,CACD;oBACcC,SAAZ,EAAqC;;;SAC9BA,SAAL,GAAiBA,SAAjB;;;;;8BAEQ7D,IAJZ,EAIkB;UACVA,SAAS,EAAb,EAAiB,OAAO,EAAP;aACV,KAAK6D,SAAL,CAAeC,8BAAf,CAA8C9D,IAA9C,CAAP;;;;;6CALqB+D,+BADZL;;;;;ACJb,IAgBaM,UAAb,WAVC1C,cAAS;WACC,CAAC2C,uBAAD,EAAmB5C,iBAAnB,CADD;gBAEM,CACZvB,aADY,EAEZ8B,qBAFY,EAGZY,eAHY;;UAAA;CAFf,CAUD;;;;;;;;;;;;;;"}