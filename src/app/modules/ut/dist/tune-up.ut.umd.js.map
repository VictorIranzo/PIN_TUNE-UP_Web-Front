{"version":3,"file":"tune-up.ut.umd.js","sources":["../src/ut.component.js","../src/components/details/services/details.service.js","../src/components/details/details.component.js","../src/components/nuevaut/services/createUT.service.js","../src/components/nuevaut/services/getProductos.service.js","../src/components/nuevaut/nuevaut.component.js","../src/ut.routing.js","../src/ut.module.js"],"sourcesContent":["import {Component} from '@angular/core';\nimport html from './ut.component.html';\nimport './ut.component.css';\n\n@Component({\n  selector: 'tn-ut',\n  template: html,\n})\nexport class UtComponent {}\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\n\r\n@Injectable()\r\nexport class DetailsService {\r\n  constructor(http: HttpClient) {\r\n    this._http = http;\r\n    this._urlUT = 'FichaUT2';\r\n    this._urlProductos = 'Productos2';\r\n  }\r\n\r\n  getUt(id) {\r\n    return this._http.get(`${this._urlUT}/${id}`);\r\n  }\r\n\r\n  getProductosDisponibles() {\r\n    return this._http.get(`${this._urlProductos}`);\r\n  }\r\n}\r\n\r\n\r\n","import {Component} from '@angular/core';\nimport {ActivatedRoute} from '@angular/router';\nimport {DetailsService} from './services';\nimport html from './details.component.html';\nimport './details.component.css';\n\n@Component({\n  selector: 'tn-ut-details',\n  template: html,\n})\nexport class DetailsComponent {\n  codigoUT = null;\n  editingMode = false;\n  ut;\n  constructor(route: ActivatedRoute, detailsService: DetailsService) {\n    this._route = route;\n    this._detailsService = detailsService;\n  }\n  ngOnInit() {\n    this.codigoUT = this._route.params._value.id;\n    this._getUtSub = this._detailsService.getUt(this.codigoUT).subscribe((data) => {\n      // TODO: si no vas a usar this.ut luego, no la guardes\n      // TODO: utiliza destructuring para que quede más claro, ej\n      // const {Nombre, Orden} = data.UT; const {listaVersiones,...} = data\n      // TODO: seguramente sería mejor tener un solo objeto en el this\n      // en plan ut, y en el html bindear a ut.prop y así no tener mil cosas \n      // en el scope\n      this.ut = data;\n      this.nombreUT = this.ut.UT.Nombre;\n      this.orden = this.ut.UT.Orden;\n      this.producto = this.ut.ProductoUT;\n      this._parseSprints(this.ut.listaVersionesUT);\n      this._parseWorkflows(this.ut.listaWorkflowsDisponibles);\n      this._parseTipos(this.ut.listaTiposUT);\n      this._parseProyectos(this.ut.listaProyectos);\n      this.descripcion = this.ut.UT.Definicion;\n      this.sprint = 177;\n    });\n    this._detailsService.getProductosDisponibles().subscribe((data) => {\n      this._parseProductos(data);\n    });\n  }\n  ngOnDestroy() {\n    this._getUtSub &&\n    !this._getUtSub.closed &&\n    this._getUtSub.unsubscribe();\n  }\n\n  onEditar() {\n    this.editingMode = true;\n  }\n\n  onCancelar() {\n    this.editingMode = false;\n  }\n\n  onGuardar() {\n    this.editingMode = false;\n  }\n  // TODO: var a = 'hola', label: a === label: `${a}`\n  // las template strings solo valen si vas a escribir más.\n  // TODO, en vez de almacenar todo esto en this, llama a las funciones desde el html y ya esta,\n  // que solo se van a llamar una vez\n  _parseSprints(sprints) {\n    this.sprintsDisponibles = sprints.map((sprint) => {\n      return {label: `${sprint.Nombre}`, value: sprint.IdVersion};\n    });\n    this.sprintsDisponibles.push({label: 'Backlog', value: null});\n  }\n  _parseWorkflows(wfs) {\n    this.workflowsDisponibles = wfs.map((wf) => {\n      return {label: `${wf.Nombre}`, value: wf.IdWorkflow};\n    });\n  }\n  _parseTipos(tipos) {\n    this.tiposDisponibles = tipos.map((tipo) => {\n      return {label: `${tipo.Nombre}`, value: tipo.IdTipoUT};\n    });\n  }\n  _parseProyectos(proyectos) {\n    this.proyectosDisponibles = proyectos.map((proy) => {\n      return {label: `${proy.Nombre}`, value: proy.IdProyecto};\n    });\n  }\n  _parseProductos(productos) {\n    this.productosDisponibles = productos.map((prod) => {\n      return {label: `${prod.Nombre}`, value: prod.IdProducto};\n    });\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable()\nexport class CreateUTService {\n  constructor(http: HttpClient) {\n    this._http = http;\n    this._url = 'UTs/Crear';\n  }\n  put(newUT) {\n    return this._http.put(this._url, newUT);\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable()\nexport class GetProductosService {\n  constructor(http: HttpClient) {\n    this._http = http;\n    this._url = 'Productos2';\n  }\n  get() {\n    return this._http.get(\n      `${this._url}`\n    );\n  }\n}\n","import {Component} from '@angular/core';\nimport {NotificationsService} from '@tune-up/core';\nimport {CreateUTService, GetProductosService} from './services';\nimport html from './nuevaut.component.html';\nimport './nuevaut.component.css';\n\n@Component({\n  selector: 'tn-ut-nuevaut',\n  template: html,\n  providers: [CreateUTService, GetProductosService],\n})\nexport class NuevaUTComponent {\n  ut = {\n    Nombre: null,\n    IdVersion: null,\n    IdProducto: null,\n    IdWorkflow: null,\n    IdTipoUT: null,\n    IdProyecto: null,\n  };\n  productos = [];\n\n  constructor(\n    createUTService: CreateUTService,\n    getProductosService: GetProductosService,\n    notificationsService: NotificationsService,\n  ) {\n    this._createUTService = createUTService;\n    this._getProductosService = getProductosService;\n    this._notificationService = notificationsService;\n    this._getProductos();\n  }\n\n  _getProductos() {\n    this._getProductosSubscription = this._getProductosService.get().subscribe(\n      (data) => {\n        this.productos = data;\n      },\n      (error) =>\n        this._notificationService.error(\n          'No se han podido obtener los productos',\n          error\n        )\n    );\n  }\n\n  _crearUT() {\n    idUT = 0;\n    this.createUTService.put(this.ut).subscribe(\n      (data) => {\n        this.idUT = data.Resultado;\n      },\n      (error) => {\n        this._notificationService.error(\n          'No se pudo crear la UT especficada',\n          error\n        );\n      }\n    );\n    return idUT;\n  }\n\n  ngOnDestroy() {\n    this._getProductosSubscription &&\n      !this._getProductosSubscription.closed &&\n      this._getProductosSubscription.unsubscribe();\n  }\n}\n","import {RouterModule} from '@angular/router';\nimport {NgModule} from '@angular/core';\nimport {UtComponent} from './ut.component';\nimport {DetailsComponent, NuevaUTComponent} from './components';\n\n@NgModule({\n  imports: [RouterModule.forChild([\n    {path: '', component: UtComponent},\n    {path: 'add', component: NuevaUTComponent},\n    {path: ':id', component: DetailsComponent},\n  ])],\n  exports: [RouterModule],\n})\nexport class UtRoutingModule {}\n\n\n","import {NgModule} from '@angular/core';\nimport {UtRoutingModule} from './ut.routing';\nimport {UtComponent} from './ut.component';\nimport {TuneUpCoreModule} from '@tune-up/core';\nimport {DetailsComponent, DetailsService, NuevaUTComponent} from './components';\n\n@NgModule({\n  imports: [TuneUpCoreModule, UtRoutingModule],\n  declarations: [\n    UtComponent,\n    DetailsComponent,\n    NuevaUTComponent,\n  ],\n  providers: [\n    DetailsService,\n  ],\n})\nexport class UtModule {}\n"],"names":["UtComponent","Component","html","DetailsService","Injectable","http","_http","_urlUT","_urlProductos","id","get","HttpClient","DetailsComponent","route","detailsService","codigoUT","editingMode","ut","_route","_detailsService","params","_value","_getUtSub","getUt","subscribe","data","nombreUT","UT","Nombre","orden","Orden","producto","ProductoUT","_parseSprints","listaVersionesUT","_parseWorkflows","listaWorkflowsDisponibles","_parseTipos","listaTiposUT","_parseProyectos","listaProyectos","descripcion","Definicion","sprint","getProductosDisponibles","_parseProductos","closed","unsubscribe","sprints","sprintsDisponibles","map","label","value","IdVersion","push","wfs","workflowsDisponibles","wf","IdWorkflow","tipos","tiposDisponibles","tipo","IdTipoUT","proyectos","proyectosDisponibles","proy","IdProyecto","productos","productosDisponibles","prod","IdProducto","ActivatedRoute","CreateUTService","_url","newUT","put","GetProductosService","NuevaUTComponent","createUTService","getProductosService","notificationsService","_createUTService","_getProductosService","_notificationService","_getProductos","_getProductosSubscription","error","idUT","Resultado","NotificationsService","UtRoutingModule","NgModule","RouterModule","forChild","path","component","UtModule","TuneUpCoreModule"],"mappings":"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"}