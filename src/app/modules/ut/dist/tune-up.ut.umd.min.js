!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/router"),require("@angular/common"),require("@angular/common/http"),require("@tune-up/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/router","@angular/common","@angular/common/http","@tune-up/core"],t):t((e.tuneUp=e.tuneUp||{},e.tuneUp.ut={}),e.tuneUp.vendor.ngCore,e.tuneUp.vendor.ngRouter,e.tuneUp.vendor.ngCommon,e.tuneUp.vendor.ngCommonHttp,e.tuneUp.app)}(this,function(e,t,n,i,o,r){"use strict";function __$styleInject(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");return i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t}__$styleInject("",void 0);!function(){function AwaitValue(e){this.value=e}function AsyncGenerator(e){function resume(t,n){try{var i=e[t](n),o=i.value;o instanceof AwaitValue?Promise.resolve(o.value).then(function(e){resume("next",e)},function(e){resume("throw",e)}):settle(i.done?"return":"normal",i.value)}catch(e){settle("throw",e)}}function settle(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?resume(t.key,t.arg):n=null}var t,n;this._invoke=function send(e,i){return new Promise(function(o,r){var u={key:e,arg:i,resolve:o,reject:r,next:null};n?n=n.next=u:(t=n=u,resume(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)}}();var u,s,d,a,l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),p=(u=t.Component({selector:"tn-ut",template:""}))(s=function UtComponent(){l(this,UtComponent)})||s,v=(d=t.Injectable())(a=function(){function DetailsService(e){l(this,DetailsService),this._http=e,this._urlUT="FichaUT2",this._urlProductos="Productos2"}return c(DetailsService,[{key:"getUt",value:function getUt(e){return this._http.get(this._urlUT+"/"+e)}},{key:"getProductosDisponibles",value:function getProductosDisponibles(){return this._http.get(""+this._urlProductos)}}]),DetailsService}())||a;Reflect.defineMetadata("design:paramtypes",[o.HttpClient],v);__$styleInject("",void 0);var g,f,h=(g=t.Component({selector:"tn-ut-details",template:'<div class="ui-g">\r\n  <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n    Código\r\n  </div>\r\n  <div class="ui-g-3 ui-md-2 ui-lg-1">\r\n    <input id="disabled-input" type="text" size= "4" pInputText [(ngModel)]= "codigoUT" [disabled]="true" />\r\n  </div>\r\n  <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n    Nombre\r\n  </div>\r\n  <div class="ui-g-20 ui-md-10 ui-lg-5">\r\n    <input id="input" type="text" size="50" pInputText [(ngModel)]="nombreUT" [disabled]= "!editingMode"> \r\n  </div>\r\n  <div class="ui-g-12 ui-md-6 ui-lg-3">\r\n      <button *ngIf="!editingMode" pButton type="button" label="Editar" (click)="onEditar()"></button>\r\n      <button *ngIf="editingMode" pButton type="button" label="Guardar" (click)="onGuardar()"></button>\r\n      <button *ngIf="editingMode" pButton type="button" label="Cancelar" (click)="onCancelar()"></button>\r\n  </div>\r\n</div>\r\n<div class="ui-g">\r\n    <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n        Producto\r\n    </div>\r\n    <div class="ui-g-12 ui-md-6 ui-lg-3">\r\n        <p-dropdown [options]="productosDisponibles" [(ngModel)]="producto" optionLabel= "IdProducto" [disabled]= "!editingMode" [style]="{\'width\':\'250px\'}"></p-dropdown>\r\n    </div>\r\n    <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n        Sprint\r\n    </div>\r\n    <div class="ui-g-12 ui-md-6 ui-lg-3">\r\n        <p-dropdown [options]="sprintsDisponibles" [(ngModel)]="sprint" [disabled]= "!editingMode" [style]="{\'width\':\'200px\'}"></p-dropdown>\r\n    </div>\r\n    <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n        Orden\r\n      </div>\r\n      <div class="ui-g-6 ui-md-4 ui-lg-2">\r\n        <input id="input" type="text" size="4" pInputText [(ngModel)]="orden" [disabled]= "!editingMode"> \r\n    </div>\r\n</div>\r\n<div class="ui-g">\r\n    <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n      Workflow\r\n    </div>\r\n    <div class="ui-g-12 ui-md-6 ui-lg-3">\r\n        <p-dropdown [options]="workflowsDisponibles" [(ngModel)]="workflow" [disabled]= "!editingMode" [style]="{\'width\':\'250px\'}"></p-dropdown>\r\n    </div>\r\n    <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n        Tipo\r\n    </div>\r\n    <div class="ui-g-12 ui-md-6 ui-lg-3">\r\n        <p-dropdown [options]="tiposDisponibles" [(ngModel)]="tipo" [disabled]= "!editingMode" [style]="{\'width\':\'200px\'}"></p-dropdown>\r\n    </div>\r\n    <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n        Proyecto\r\n      </div>\r\n      <div class="ui-g-12 ui-md-6 ui-lg-3">\r\n          <p-dropdown [options]="proyectosDisponibles" [(ngModel)]="proyecto" [disabled]= "!editingMode" [style]="{\'width\':\'250px\'}"></p-dropdown>\r\n    </div>\r\n</div>\r\n<div class="ui-g">\r\n    <div class="ui-g-4 ui-md-2 ui-lg-1">\r\n        Descripción\r\n      </div>\r\n      <div class="ui-g-30 ui-md-20 ui-lg-10">\r\n          <textarea rows="5"  pInputTextarea  [(ngModel)]="descripcion" [disabled]= "!editingMode" cols="120"></textarea>\r\n      </div>\r\n\r\n</div>\r\n\r\n'}))(f=function(){function DetailsComponent(e,t,n){l(this,DetailsComponent),this.codigoUT=null,this.editingMode=!1,this._route=e,this._detailsService=n}return c(DetailsComponent,[{key:"ngOnInit",value:function ngOnInit(){var e=this;this.codigoUT=parseInt(this._route.params._value.id),this._detailsService.getUt(this.codigoUT).subscribe(function(t){e.ut=t,e.nombreUT=e.ut.UT.Nombre,e.orden=e.ut.UT.Orden,e.producto=e.ut.ProductoUT,e._parseSprints(e.ut.listaVersionesUT),e._parseWorkflows(e.ut.listaWorkflowsDisponibles),e._parseTipos(e.ut.listaTiposUT),e._parseProyectos(e.ut.listaProyectos),e.descripcion=e.ut.UT.Definicion,e.sprint="Sprint 2"}),this._detailsService.getProductosDisponibles().subscribe(function(t){e._parseProductos(t)})}},{key:"onEditar",value:function onEditar(){this.editingMode=!0}},{key:"onCancelar",value:function onCancelar(){this.editingMode=!1}},{key:"onGuardar",value:function onGuardar(){this.editingMode=!1}},{key:"_parseSprints",value:function _parseSprints(e){this.sprintsDisponibles=e.map(function(e){return{label:""+e.Nombre,value:e.IdVersion}}),this.sprintsDisponibles.push({label:"Backlog",value:null})}},{key:"_parseWorkflows",value:function _parseWorkflows(e){this.workflowsDisponibles=e.map(function(e){return{label:""+e.Nombre,value:e.IdWorkflow}})}},{key:"_parseTipos",value:function _parseTipos(e){this.tiposDisponibles=e.map(function(e){return{label:""+e.Nombre,value:e.IdTipoUT}})}},{key:"_parseProyectos",value:function _parseProyectos(e){this.proyectosDisponibles=e.map(function(e){return{label:""+e.Nombre,value:e.IdProyecto}})}},{key:"_parseProductos",value:function _parseProductos(e){this.productosDisponibles=e.map(function(e){return{label:""+e.Nombre,value:e.IdProducto}})}}]),DetailsComponent}())||f;Reflect.defineMetadata("design:paramtypes",[n.ActivatedRoute,i.Location,v],h);var m,b,y=(m=t.Injectable())(b=function(){function CreateUTService(e){l(this,CreateUTService),this._http=e,this._url="UTs/Crear"}return c(CreateUTService,[{key:"put",value:function put(e){return this._http.put(this._url,e)}}]),CreateUTService}())||b;Reflect.defineMetadata("design:paramtypes",[o.HttpClient],y);var _,U,T=(_=t.Injectable())(U=function(){function GetProductosService(e){l(this,GetProductosService),this._http=e,this._url="Productos2"}return c(GetProductosService,[{key:"get",value:function get$$1(){return this._http.get(""+this._url)}}]),GetProductosService}())||U;Reflect.defineMetadata("design:paramtypes",[o.HttpClient],T);__$styleInject("",void 0);var P,w,M=(P=t.Component({selector:"tn-ut-nuevaut",template:'<div class="horizontal">\r\n  <span class="ui-float-label">\r\n    <input id="nombre-ut-textfield" type="text" size="30" [(ngModel)]="ut.Nombre" pInputText> \r\n    <label for="nombre-ut-textfield">Nombre UT</label>\r\n  </span>\r\n  \r\n  <p-dropdown [options]="productos" [(ngModel)]="ut.IdProducto" optionLabel="Nombre"></p-dropdown>\r\n  \r\n</div>\r\n',providers:[y,T]}))(w=function(){function NuevaUTComponent(e,t,n){l(this,NuevaUTComponent),this.ut={Nombre:null,IdVersion:null,IdProducto:null,IdWorkflow:null,IdTipoUT:null,IdProyecto:null},this.productos=[],this._createUTService=e,this._getProductosService=t,this._notificationService=n,this._getProductos()}return c(NuevaUTComponent,[{key:"_getProductos",value:function _getProductos(){var e=this;this._getProductosSubscription=this._getProductosService.get().subscribe(function(t){e.productos=t},function(t){return e._notificationService.error("No se han podido obtener los productos",t)})}},{key:"_crearUT",value:function _crearUT(){var e=this;return idUT=0,this.createUTService.put(this.ut).subscribe(function(t){e.idUT=t.Resultado},function(t){e._notificationService.error("No se pudo crear la UT especficada",t)}),idUT}},{key:"ngOnDestroy",value:function ngOnDestroy(){this._getProductosSubscription&&!this._getProductosSubscription.closed&&this._getProductosSubscription.unsubscribe()}}]),NuevaUTComponent}())||w;Reflect.defineMetadata("design:paramtypes",[y,T,r.NotificationsService],M);var S,k,C,I,x=(S=t.NgModule({imports:[n.RouterModule.forChild([{path:"",component:p},{path:":id",component:h},{path:"add",component:M}])],exports:[n.RouterModule]}))(k=function UtRoutingModule(){l(this,UtRoutingModule)})||k,D=(C=t.NgModule({imports:[r.TuneUpCoreModule,x],declarations:[p,h,M],providers:[v]}))(I=function UtModule(){l(this,UtModule)})||I;e.UtModule=D,e.DetailsComponent=h,e.DetailsService=v,e.NuevaUTComponent=M,e.CreateUTService=y,e.GetProductosService=T,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=tune-up.ut.umd.min.js.map
